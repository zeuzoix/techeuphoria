<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<title>A Technical Odyssey</title>
<link href="http://zeuzoix.github.io/techeuphoria/stylesheets/app.css" rel="stylesheet">
<link href="/techeuphoria/feed.xml" rel="alternate" type="application/atom+xml">
<script src="http://zeuzoix.github.io/techeuphoria/javascripts/vendor/custom.modernizr.js"></script>
<link href="http://zeuzoix.github.io/techeuphoria/humans.txt" rel="author" type="text/plain">
</head>
<body class="antialiased">
<div class="fixed-width">
<nav class="top-bar">
<ul class="title-area">
<li class="name">
<h1>
<a href="/techeuphoria/">
TechEuphoria
</a>
</h1>
</li>
<li class="toggle-topbar menu-icon">
<a href="#"><span></span></a>
</li>
</ul>
<section class="top-bar-section">
<ul class="left">
<li class="divider">
<li>
<a href="/techeuphoria/quests/index.html">/quests</a>
</li>
</li>
<li class="divider"></li>
</ul>
</section>
</nav>
</div>
<div class="row">
<div class="large-12 columns">
<h1></h1>
</div>
</div>
<div class="row" id="content">
<div class="large-12 columns">
<div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#introduction">Introduction</a>
<ul class="sectlevel1">
<li><a href="#about-prpl">1. About prpl</a></li>
<li><a href="#about-openwrt">2. About OpenWrt</a></li>
</ul>
</li>
<li><a href="#building-openwrt">Building OpenWrt</a>
<ul class="sectlevel1">
<li><a href="#dependencies">3. Dependencies</a>
<ul class="sectlevel2">
<li><a href="#installing-dependencies">3.1. Installing Dependencies</a></li>
<li><a href="#problems-with-installation">3.2. Problems with installation</a></li>
<li><a href="#solving-the-installation-errors">3.3. Solving the installation errors</a></li>
</ul>
</li>
<li><a href="#cloning-the-openwrt-git-repository">4. Cloning the OpenWrt GIT Repository</a></li>
</ul>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">This document is under active development!</div>
<div class="paragraph">
<p>If you find errors or omissions in this document, please don&#8217;t hesitate to {uri-conrad-mail}[send me a mail].</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This journal assumes you are comfortable with a linux environment as most of the
published work here uses an Ubuntu distribution as the work station.</p>
</div>
</div>
</div>
<h1 id="introduction" class="sect0"><a class="anchor" href="#introduction"></a>Introduction</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This journal was started in order to document my exploration of OpenWrt through
the prpl foundation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="about-prpl"><a class="anchor" href="#about-prpl"></a>1. About prpl</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="about-openwrt"><a class="anchor" href="#about-openwrt"></a>2. About OpenWrt</h2>
<div class="sectionbody">

</div>
</div>
<h1 id="building-openwrt" class="sect0"><a class="anchor" href="#building-openwrt"></a>Building OpenWrt</h1>
<div class="sect1">
<h2 id="dependencies"><a class="anchor" href="#dependencies"></a>3. Dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following is a list of packages that have to be installed in the system.
Each package has a brief description taken with the help of <em>apt-cache</em>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>build-essential</strong> : Informational list of build-essential packages. If you
do not plan to build Debian packages, you don&#8217;t need this package.  Starting
with dpkg (&gt;= 1.14.18) this package is required for building Debian packages.
This package contains an informational list of packages which are considered
essential for building Debian packages.  This package also depends on the
packages on that list, to make it easy to have the build-essential packages
installed.</p>
</li>
<li>
<p><strong>subversion</strong> : Apache Subversion, also known as svn, is a centralised version
control system.  Version control systems allow many individuals (who may be
distributed geographically) to collaborate on a set of files (source code,
websites, etc).  Subversion began with a CVS paradigm and supports all the major
features of CVS, but has evolved to support many features that CVS users often
wish they had.</p>
</li>
<li>
<p><strong>libncurses5-dev</strong> : The ncurses library routines are a terminal-independent
method of updating character screens with reasonable optimization.This package
contains the header files, static libraries and symbolic links that developers
using ncurses will need.</p>
</li>
<li>
<p><strong>zlib1g-dev</strong> : Zlib compression library for development. zlib is a library
implementing the deflate compression method found in gzip and PKZIP. This
package includes the development support files.</p>
</li>
<li>
<p><strong>gawk</strong> : GNU awk, a pattern scanning and processing language `awk', a program
that you can use to select particular records in a file and perform operations
upon them.</p>
</li>
<li>
<p><strong>gcc-multilib</strong> : GNU C compiler (multilib files). This is the GNU C compiler,
a fairly portable optimizing compiler for C.</p>
</li>
<li>
<p><strong>flex</strong> : A fast lexical analyzer generator. Flex is a tool for generating
scanners: programs which recognized lexical patterns in text.</p>
</li>
<li>
<p><strong>git-core</strong> : A fast, scalable, distributed revision control system. Git is
popular version control system designed to handle very large projects with
speed and efficiency; it is used for many high profile open source projects,
most notably the Linux kernel.</p>
</li>
<li>
<p><strong>gettext</strong> : GNU Internationalization utilities. Interesting for authors or
maintainers of other packages or programs which they want to see
internationalized.</p>
</li>
<li>
<p><strong>qemu-system-mips</strong> : QEMU full system emulation binaries (mips) QEMU is a
fast processor emulator: currently the package supports MIPS emulation. By
using dynamic translation it achieves reasonable speed while being easy to
port on new host CPUs.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="installing-dependencies"><a class="anchor" href="#installing-dependencies"></a>3.1. Installing Dependencies</h3>
<div class="paragraph">
<p>To install the dependencies we use the apt-get command line application in a
terminal. The dependencies are installed as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">conrad@conrad-HP-Pavilion-dm3-Notebook-PC:~$ sudo apt-get install build-essential subversion libncurses5-dev zlib1g-dev gawk gcc-multilib flex git-core gettext qemu-system-mips</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div id="sudo-apt-get-install-dependencies" class="imageblock" style="text-align: center">
<div class="content">
<a class="image" href="images/sudo-apt-get-install-dependencies.png"><img src="http://zeuzoix.github.io/techeuphoria/images/sudo-apt-get-install-dependencies.png" alt="sudo apt get install dependencies" width="640" height="480"></a>
</div>
<div class="title">Installing dependencies with sudo apt-get install</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The use of sudo is required to grant root priveledges to the apt-get command
while executing as changes will be made in the system directories. If you don&#8217;t
have sudo access talk to your system administrator. Getting sudo access is a
matter of editing the /etc/sudoers file. For further information I suggest you
read about <a href="https://help.ubuntu.com/community/RootSudo" target="_blank">RootSudo</a> in the Ubuntu community pages.</p>
</div>
</div>
<div class="sect2">
<h3 id="problems-with-installation"><a class="anchor" href="#problems-with-installation"></a>3.2. Problems with installation</h3>
<div class="paragraph">
<p>While installing the above packages in my work station I encountered the
following errors which stopped the installation process</p>
</div>
<div class="exampleblock">
<div class="content">
<div id="sudo-apt-get-install-dependencies" class="imageblock" style="text-align: center">
<div class="content">
<a class="image" href="images/sudo-apt-get-install-dependencies-errors.png"><img src="http://zeuzoix.github.io/techeuphoria/images/sudo-apt-get-install-dependencies-errors.png" alt="sudo apt get install dependencies errors" width="640" height="480"></a>
</div>
<div class="title">Errors encountered during installation</div>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">Err http://lk.archive.ubuntu.com/ubuntu/ trusty-updates/main qemu-system-common i386 2.0.0+dfsg-2ubuntu1.5
  404  Not Found [IP: 91.189.92.201 80]
Err http://lk.archive.ubuntu.com/ubuntu/ trusty-updates/main qemu-keymaps all 2.0.0+dfsg-2ubuntu1.5
  404  Not Found [IP: 91.189.92.201 80]
Err http://lk.archive.ubuntu.com/ubuntu/ trusty-updates/main qemu-system-mips i386 2.0.0+dfsg-2ubuntu1.5
  404  Not Found [IP: 91.189.92.201 80]
Err http://lk.archive.ubuntu.com/ubuntu/ trusty-updates/main qemu-utils i386 2.0.0+dfsg-2ubuntu1.5
  404  Not Found [IP: 91.189.92.201 80]
E: Failed to fetch http://lk.archive.ubuntu.com/ubuntu/pool/main/q/qemu/qemu-system-common_2.0.0+dfsg-2ubuntu1.5_i386.deb  404  Not Found [IP: 91.189.92.201 80]

E: Failed to fetch http://lk.archive.ubuntu.com/ubuntu/pool/main/q/qemu/qemu-keymaps_2.0.0+dfsg-2ubuntu1.5_all.deb  404  Not Found [IP: 91.189.92.201 80]

E: Failed to fetch http://lk.archive.ubuntu.com/ubuntu/pool/main/q/qemu/qemu-system-mips_2.0.0+dfsg-2ubuntu1.5_i386.deb  404  Not Found [IP: 91.189.92.201 80]

E: Failed to fetch http://lk.archive.ubuntu.com/ubuntu/pool/main/q/qemu/qemu-utils_2.0.0+dfsg-2ubuntu1.5_i386.deb  404  Not Found [IP: 91.189.92.201 80]

E: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing?<i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Two recommendations provided by apt-get i.e. doing a system update OR
passing a <em>--fix-missing</em> option to the command.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="solving-the-installation-errors"><a class="anchor" href="#solving-the-installation-errors"></a>3.3. Solving the installation errors</h3>
<div class="paragraph">
<p>In my case the first option of doing a system update helped. So the actual
steps that worker for my workstation are listed in the snippet below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">conrad@conrad-HP-Pavilion-dm3-Notebook-PC:~/git/techeuphoria/quests/prplwrt$ sudo apt-get update <i class="conum" data-value="1"></i><b>(1)</b>
Ign http://dl.google.com stable InRelease
Get:1 http://dl.google.com stable Release.gpg [198 B]
Ign http://extras.ubuntu.com trusty InRelease
.
.
.
Ign http://lk.archive.ubuntu.com trusty/multiverse Translation-en_US
Ign http://lk.archive.ubuntu.com trusty/restricted Translation-en_US
Ign http://lk.archive.ubuntu.com trusty/universe Translation-en_US
Fetched 1,722 kB in 19s (87.8 kB/s)
Reading package lists... Dones <i class="conum" data-value="2"></i><b>(2)</b>
conrad@conrad-HP-Pavilion-dm3-Notebook-PC:~/git/techeuphoria/quests/prplwrt$ sudo apt-get install build-essential subversion libncurses5-dev zlib1g-dev gawk gcc-multilib flex git-core gettext qemu-system-mips <i class="conum" data-value="3"></i><b>(3)</b>
Reading package lists... Done
Building dependency tree
.
.
.
etting up qemu-keymaps (2.0.0+dfsg-2ubuntu1.6) ...
Setting up qemu-system-mips (2.0.0+dfsg-2ubuntu1.6) ...
Setting up qemu-utils (2.0.0+dfsg-2ubuntu1.6) ...
Setting up subversion (1.8.8-1ubuntu3.1) ...
Processing triggers for libc-bin (2.19-0ubuntu6.3) ... <i class="conum" data-value="4"></i><b>(4)</b>
conrad@conrad-HP-Pavilion-dm3-Notebook-PC:~/git/techeuphoria/quests/prplwrt$</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Do an update with <em>sudo apt-get update</em></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>sudo apt-get update succeeds with no errors</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Do an install with <em>sudo apt-get install &#8230;&#8203;</em></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>sudo apt-get install succeeds with not errors</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cloning-the-openwrt-git-repository"><a class="anchor" href="#cloning-the-openwrt-git-repository"></a>4. Cloning the OpenWrt GIT Repository</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that we have all the dependencies installed in the system it is time to
clone the repository. The OpenWrt project is maintained using
<a href="http://git-scm.com/" target="_blank">GIT</a>. So change directory to the location where you would like
to keep the source code and clone the repository as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">conrad@conrad-HP-Pavilion-dm3-Notebook-PC:~/git$ git clone git://git.openwrt.org/openwrt.git <i class="conum" data-value="1"></i><b>(1)</b>
Cloning into 'openwrt'...
remote: Counting objects: 287173, done.
remote: Compressing objects: 100% (83724/83724), done.
remote: Total 287173 (delta 195562), reused 281130 (delta 190331)
Receiving objects: 100% (287173/287173), 106.03 MiB | 163.00 KiB/s, done.
Resolving deltas: 100% (195562/195562), done.
Checking connectivity... done.
Checking out files: 100% (7375/7375), done. <i class="conum" data-value="2"></i><b>(2)</b>
conrad@conrad-HP-Pavilion-dm3-Notebook-PC:~/git$</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Command to clone the git repository at git://git.openwrt.org/openwrt.git</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Clone completes without any errors</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<footer class="row" style="max-width: 100%">
<hr>
<div class="large-6 columns">
<p style="margin-bottom: .75em">
&copy; conrad.s.j.gomes@gmail.com 2014
<br>
Built on Foundation. Baked by Awestruct. Composed with Asciidoc
</p>
</div>
<div class="large-6 columns">
<ul class="inline-list right">
<li>
<a href="http://zeuzoix.github.io/techeuphoria/">Home</a>
</li>
</ul>
</div>
</footer>
<script>
document.write('<script src=' + ('__proto__' in {} ? 'http://zeuzoix.github.io/techeuphoria/javascripts/vendor/zepto' : 'http://zeuzoix.github.io/techeuphoria/javascripts/vendor/jquery') + '.js><\/script>')
</script>
<script src="http://zeuzoix.github.io/techeuphoria/javascripts/foundation/foundation.js"></script>
<script src="http://zeuzoix.github.io/techeuphoria/javascripts/foundation/foundation.topbar.js"></script>
<script>
$(document).foundation()
</script>
</body>
</html>
